System.register("chunks:///_virtual/GameManager.ts",["cc","./PlayerController.ts"],(function(e){"use strict";var t,r,i,n,a,o,l,u,c,s;return{setters:[function(e){t=e.cclegacy,r=e._decorator,i=e.Label,n=e.Node,a=e.Prefab,o=e.CCInteger,l=e.v3,u=e.instantiate,c=e.Component},function(e){s=e.PlayerController}],execute:function(){var p,h,f,b,d,y,_,v,g,N,S,m,T;function G(e,t,r,i){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(i):void 0})}function I(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e,t,r,i,n){var a={};return Object.keys(i).forEach((function(e){a[e]=i[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,i){return i(e,t,r)||r}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}t._RF.push({},"08415XDrRpHeqP51AONjHd2","GameManager",void 0);var O,C,B=r.ccclass,z=r.property;!function(e){e[e.BT_NONE=0]="BT_NONE",e[e.BT_STONE=1]="BT_STONE"}(O||(O={})),function(e){e[e.GS_INIT=0]="GS_INIT",e[e.GS_PLAYING=1]="GS_PLAYING",e[e.GS_END=2]="GS_END"}(C||(C={}));e("GameManager",(p=B("GameManager"),h=z({type:i}),f=z({type:s}),b=z({type:n}),d=z({type:a}),y=z({type:o}),p((g=E((v=function(e){var t,r;function i(){for(var t,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return G(P(t=e.call.apply(e,[this].concat(i))||this),"stepsLabel",g,P(t)),G(P(t),"playerCtrl",N,P(t)),G(P(t),"startMenu",S,P(t)),G(P(t),"cubePrfb",m,P(t)),G(P(t),"roadLength",T,P(t)),w(P(t),"_road",[]),w(P(t),"_curState",C.GS_INIT),t}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n,a,o,c=i.prototype;return c.start=function(){this.curState=C.GS_INIT,this.playerCtrl.node.on("JumpEnd",this.onPlayerJumpEnd,this)},c.onPlayerJumpEnd=function(e){this.stepsLabel.string=""+e,this.checkResult(e)},c.init=function(){this.startMenu.active=!0,this.generateRoad(),this.playerCtrl.setInputActive(!1),this.playerCtrl.node.setPosition(l()),this.playerCtrl.reset()},c.generateRoad=function(){this.node.removeAllChildren(),this._road=[],this._road.push(O.BT_STONE);for(var e=1;e<this.roadLength;e++)this._road[e-1]===O.BT_NONE?this._road.push(O.BT_STONE):this._road.push(Math.floor(2*Math.random()));for(var t=0;t<this._road.length;t++){var r=this.spawnBlockByType(this._road[t]);r&&(this.node.addChild(r),r.setPosition(t,-1.5,0))}},c.spawnBlockByType=function(e){var t=null;switch(e){case O.BT_STONE:t=u(this.cubePrfb)}return t},c.onStartButtonClicked=function(){this.curState=C.GS_PLAYING},c.checkResult=function(e){e<=this.roadLength?this._road[e]==O.BT_NONE&&(this.curState=C.GS_INIT):this.curState=C.GS_INIT},n=i,(a=[{key:"curState",set:function(e){var t=this;switch(e){case C.GS_INIT:this.init();break;case C.GS_PLAYING:this.startMenu.active=!1,this.stepsLabel.string="0",setTimeout((function(){t.playerCtrl.setInputActive(!0)}),.1);break;case C.GS_END:}this._curState=e}}])&&I(n.prototype,a),o&&I(n,o),i}(c)).prototype,"stepsLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=E(v.prototype,"playerCtrl",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=E(v.prototype,"startMenu",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=E(v.prototype,"cubePrfb",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=E(v.prototype,"roadLength",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),_=v))||_));t._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerController.ts",["cc"],(function(t){"use strict";var e,i,n,o,r,s,u,c,a;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Animation,o=t.SkeletalAnimation,r=t.systemEvent,s=t.SystemEvent,u=t.Vec3,c=t.v3,a=t.Component}],execute:function(){var l,p,m,h,_,d,f;function v(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function P(t,e,i,n,o){var r={};return Object.keys(n).forEach((function(t){r[t]=n[t]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,n){return n(t,e,i)||i}),r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(t,e,r),r=null),r}e._RF.push({},"34829WI58pODqaStlvbLt0O","PlayerController",void 0);var g=i.ccclass,S=i.property;t("PlayerController",(l=g("PlayerController"),p=S({type:n}),m=S({type:o}),l((d=P((_=function(t){var e,i;function n(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return v(y(e=t.call.apply(t,[this].concat(n))||this),"BodyAnim",d,y(e)),b(y(e),"_startJump",!1),b(y(e),"_jumpStep",0),b(y(e),"_curJumpTime",0),b(y(e),"_jumpTime",.1),b(y(e),"_curJumpSpeed",0),b(y(e),"_curPos",c()),b(y(e),"_deltaPos",c(0,0,0)),b(y(e),"_targetPos",c()),b(y(e),"_isMoving",!1),b(y(e),"_curMoveIndex",0),v(y(e),"CocosAnim",f,y(e)),e}i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var o=n.prototype;return o.start=function(){},o.setInputActive=function(t){t?r.on(s.EventType.MOUSE_UP,this.onMouseUp,this):r.off(s.EventType.MOUSE_UP,this.onMouseUp,this)},o.onMouseUp=function(t){0===t.getButton()?this.jumpByStep(1):2===t.getButton()&&this.jumpByStep(2)},o.jumpByStep=function(t){this._isMoving||(this._startJump=!0,this._jumpStep=t,this._curJumpTime=0,this._curJumpSpeed=this._jumpStep/this._jumpTime,this.node.getPosition(this._curPos),u.add(this._targetPos,this._curPos,c(this._jumpStep,0,0)),this._isMoving=!0,this.CocosAnim.getState("cocos_anim_jump").speed=3.5,this.CocosAnim.play("cocos_anim_jump"),1===t||2===t&&this.BodyAnim.play("twoStep"),this._curMoveIndex+=t)},o.onOnceJumpEnd=function(){this._isMoving=!1,this.CocosAnim.play("cocos_anim_idle"),this.node.emit("JumpEnd",this._curMoveIndex)},o.reset=function(){this._curMoveIndex=0},o.update=function(t){this._startJump&&(this._curJumpTime+=t,this._curJumpTime>this._jumpTime?(this.node.setPosition(this._targetPos),this._startJump=!1,this.onOnceJumpEnd()):(this.node.setPosition(this._curPos),this._deltaPos.x=this._curJumpSpeed*t,u.add(this._curPos,this._curPos,this._deltaPos),this.node.setPosition(this._curPos)))},n}(a)).prototype,"BodyAnim",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=P(_.prototype,"CocosAnim",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=_))||h));e._RF.pop()}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){"use strict";var n,e,t,i,r,o;return{setters:[function(a){n=a.cclegacy,e=a.director,t=a.Director,i=a.Canvas,r=a.Camera,o=a.game}],execute:function(){n._RF.push({},"c429dZPr19J5raLv5gU4onC","migrate-canvas",void 0);var a=1048575;function c(n,e){for(var t=0,i=n.children.length;t<i;t++)n.children[t].layer=e,c(n.children[t],e)}e.on(t.EVENT_AFTER_SCENE_LAUNCH,(function(){var n,t,l,s=null===(n=e.getScene())||void 0===n?void 0:n.children,v=null===(t=e.getScene())||void 0===t?void 0:t.getComponentsInChildren(i);if(!(v.length<=1)){v=v.filter((function(n){return!!n.cameraComponent}));var m=null===(l=e.getScene())||void 0===l?void 0:l.getComponentsInChildren(r),u=0;m.forEach((function(n){return u|=n.visibility&a}));for(var p=[],d=0,f=s.length;d<f;d++){var C=s[d];if(o.isPersistRootNode(C)){var h=C.getComponentsInChildren(i);0!==h.length&&p.push.apply(p,h.filter((function(n){return!!n.cameraComponent})))}}p.forEach((function(n){if(v.find((function(e){return e!==n&&e.cameraComponent.visibility&n.cameraComponent.visibility&a}))){var e=~u,t=e&~(e-1);n.cameraComponent.visibility=t|4293918720&n.cameraComponent.visibility,c(n.node,t),u|=e}}))}}));var l=cc.Node.prototype.setParent;function s(n){var e=null,t=n.getComponent(i);return t&&t.cameraComponent?e=t.cameraComponent.visibility&t.node.layer?t.node.layer:t.cameraComponent.visibility&~(t.cameraComponent.visibility-1):(n.parent&&(e=s(n.parent)),e)}cc.Node.prototype.setParent=function(n,e){if(l.call(this,n,e),n){var t=s(this);t&&(this.layer=t,c(this,t))}},n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./PlayerController.ts","./GameManager.ts","./migrate-canvas.ts"],(function(){"use strict";return{setters:[function(){},function(){},function(){}],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});